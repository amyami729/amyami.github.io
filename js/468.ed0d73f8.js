"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[468],{2222:(t,e,n)=>{var o=n(2109),a=n(7293),l=n(3157),i=n(111),c=n(7908),s=n(6244),u=n(7207),r=n(6135),d=n(5417),p=n(1194),h=n(5112),m=n(7392),b=h("isConcatSpreadable"),_=m>=51||!a((function(){var t=[];return t[b]=!1,t.concat()[0]!==t})),f=p("concat"),g=function(t){if(!i(t))return!1;var e=t[b];return void 0!==e?!!e:l(t)},C=!_||!f;o({target:"Array",proto:!0,arity:1,forced:C},{concat:function(t){var e,n,o,a,l,i=c(this),p=d(i,0),h=0;for(e=-1,o=arguments.length;e<o;e++)if(l=-1===e?i:arguments[e],g(l))for(a=s(l),u(h+a),n=0;n<a;n++,h++)n in l&&r(p,h,l[n]);else u(h+1),r(p,h++,l);return p.length=h,p}})},6799:(t,e,n)=>{n.d(e,{Z:()=>C});var o=n(6252),a=n(3577),l={class:"modal fade",id:"deleteProductModal",tabindex:"-1",role:"dialog","data-bs-backdrop":"static","aria-labelledby":"deleteModalLabel","aria-hidden":"true"},i={class:"modal-dialog",role:"document"},c={class:"modal-content border-0"},s={class:"modal-header"},u={class:"modal-title",id:"deleteModalLabel"},r={class:"modal-body"},d=(0,o.Uk)(" 確定刪除「"),p={style:{color:"red"}},h=(0,o.Uk)("」？ "),m={class:"modal-footer"};function b(t,e,n,b,_,f){return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("div",i,[(0,o._)("div",c,[(0,o._)("div",s,[(0,o._)("h5",u,[(0,o.WI)(t.$slots,"title")]),(0,o._)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=function(){return f.hideModel&&f.hideModel.apply(f,arguments)}),"data-dismiss":"modal","aria-label":"Close"})]),(0,o._)("div",r,[d,(0,o._)("span",p,(0,a.zw)(n.currentItem.title),1),h]),(0,o._)("div",m,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[1]||(e[1]=function(){return f.hideModel&&f.hideModel.apply(f,arguments)})},"取消"),(0,o._)("button",{type:"button",class:"btn btn-danger",onClick:e[2]||(e[2]=function(t){return f.deleteItem(n.currentItem.id)})},"確認")])])])])}const _={props:{currentItem:Object},methods:{hideModel:function(){this.$emit("emit-hide")},deleteItem:function(t){this.$emit("deleteItem",t)}}};var f=n(3744);const g=(0,f.Z)(_,[["render",b]]),C=g},1774:(t,e,n)=>{n.d(e,{Z:()=>f});var o=n(6252),a=n(3577),l=n(9963),i={"aria-label":"Page navigation example"},c={class:"pagination"},s=(0,o._)("span",{"aria-hidden":"true"},"«",-1),u=[s],r=["onClick"],d=(0,o._)("span",{"aria-hidden":"true"},"»",-1),p=[d];function h(t,e,n,s,d,h){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("nav",i,[(0,o._)("ul",c,[(0,o._)("li",{class:(0,a.C_)(["page-item",{disabled:!n.paginations.has_pre}])},[(0,o._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,l.iM)((function(t){return h.getProductPages(n.paginations.current_page-1)}),["prevent"]))},u)],2),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.paginations.total_pages,(function(t){return(0,o.wg)(),(0,o.iD)("li",{class:(0,a.C_)(["page-item",{active:n.paginations.current_page===t}]),key:t},[(0,o._)("a",{class:"page-link",href:"#",onClick:(0,l.iM)((function(e){return h.getProductPages(t)}),["prevent"])},(0,a.zw)(t),9,r)],2)})),128)),(0,o._)("li",{class:(0,a.C_)(["page-item",{disabled:!n.paginations.has_next}])},[(0,o._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,l.iM)((function(t){return h.getProductPages(n.paginations.current_page+1)}),["prevent"]))},p)],2)])])])}const m={props:{paginations:Object},methods:{getProductPages:function(t){this.$emit("emitGetProducts",t),document.body.scrollTop=document.documentElement.scrollTop=0}}};var b=n(3744);const _=(0,b.Z)(m,[["render",h]]),f=_},2468:(t,e,n)=>{n.r(e),n.d(e,{default:()=>B});var o=n(6252),a=n(3577),l=function(t){return(0,o.dD)("data-v-49118372"),t=t(),(0,o.Cn)(),t},i={class:"text-right mt-4"},c={class:"table-responsive-xl mt-4"},s={class:"table nowrap"},u=l((function(){return(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"名稱"),(0,o._)("th",null,"折扣百分比"),(0,o._)("th",null,"到期日"),(0,o._)("th",{class:"d-sm-table-cell d-none"},"是否啟用"),(0,o._)("th",null,"編輯/刪除")])],-1)})),r={class:"d-sm-table-cell d-none"},d={key:0,class:"text-success"},p={key:1,class:"text-muted"},h=["onClick"],m=["onClick"],b={class:"product-pagination"};function _(t,e,n,l,_,f){var g=(0,o.up)("loading"),C=(0,o.up)("couponModal"),v=(0,o.up)("deleteModal"),w=(0,o.up)("pagination");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(g,{active:_.isLoading},null,8,["active"]),(0,o._)("div",i,[(0,o._)("button",{class:"btn btn-success",onClick:e[0]||(e[0]=function(){return f.createCoupon&&f.createCoupon.apply(f,arguments)})},"新增優惠券")]),(0,o._)("div",c,[(0,o._)("table",s,[u,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_.coupons,(function(t){return(0,o.wg)(),(0,o.iD)("tr",{key:t.id},[(0,o._)("td",null,(0,a.zw)(t.title),1),(0,o._)("td",null,(0,a.zw)(t.percent),1),(0,o._)("td",null,(0,a.zw)(t.due_date),1),(0,o._)("td",r,[t.is_enabled?((0,o.wg)(),(0,o.iD)("span",d,"啟用")):((0,o.wg)(),(0,o.iD)("span",p,"未啟用"))]),(0,o._)("td",null,[(0,o._)("button",{class:"btn btn-outline-success me-2 btn-sm",onClick:function(e){return f.editCoupon(t)}},"編輯",8,h),(0,o._)("button",{class:"btn btn-outline-danger me-2 btn-sm",onClick:function(e){return f.showDeleteCouponModal(t)}},"刪除",8,m)])])})),128))])])]),(0,o.Wm)(C,{ref:"couponModal",currentItem:_.currentCoupon,onEmitHide:e[1]||(e[1]=function(t){return f.showCouponModal(!1)}),onEmitGetCoupons:f.getCoupons},{title:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(_.modalTitle),1)]})),_:1},8,["currentItem","onEmitGetCoupons"]),(0,o.Wm)(v,{ref:"deleteModal",currentItem:_.currentCoupon,onEmitHide:e[2]||(e[2]=function(t){return f.showDeleteModal(!1)}),onDeleteItem:f.deleteCoupon},{title:(0,o.w5)((function(){return[(0,o.Uk)((0,a.zw)(_.modalTitle),1)]})),_:1},8,["currentItem","onDeleteItem"]),(0,o._)("div",b,[(0,o.Wm)(w,{class:"pagination-inner",paginations:_.pagination,onEmitGetProducts:f.getCoupons},null,8,["paginations","onEmitGetProducts"])])])}n(2222);var f=n(7244),g=n(9963),C={class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","data-bs-backdrop":"static","aria-labelledby":"couponModalLabel","aria-hidden":"true"},v={class:"modal-dialog",role:"document"},w={class:"modal-content border-0"},M={class:"modal-header"},y={class:"modal-title",id:"couponModalLabel"},k={class:"modal-body"},D={class:"row"},I={class:"col-12"},x={class:"mb-3"},P=(0,o._)("label",{for:"title",class:"form-label"},"標題",-1),$={class:"mb-3"},U=(0,o._)("label",{for:"percent",class:"form-label"},"優惠碼",-1),L={class:"mb-3"},T=(0,o._)("label",{for:"due_date"},"到期日",-1),Z={class:"mb-3"},z=(0,o._)("label",{for:"percent"},"打折百分比",-1),E={class:"form-group"},j={class:"form-check"},W=(0,o._)("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),G={class:"modal-footer"};function N(t,e,n,a,l,i){return(0,o.wg)(),(0,o.iD)("div",C,[(0,o._)("div",v,[(0,o._)("div",w,[(0,o._)("div",M,[(0,o._)("h5",y,[(0,o.WI)(t.$slots,"title")]),(0,o._)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=function(){return i.hideModel&&i.hideModel.apply(i,arguments)}),"aria-label":"Close"})]),(0,o._)("div",k,[(0,o._)("div",D,[(0,o._)("div",I,[(0,o._)("div",x,[P,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[1]||(e[1]=function(t){return l.currentCoupon.title=t}),placeholder:"請輸入標題"},null,512),[[g.nr,l.currentCoupon.title]])]),(0,o._)("div",$,[U,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"percent","onUpdate:modelValue":e[2]||(e[2]=function(t){return l.currentCoupon.code=t}),placeholder:"請輸入優惠碼"},null,512),[[g.nr,l.currentCoupon.code]])]),(0,o._)("div",L,[T,(0,o.wy)((0,o._)("input",{type:"date",class:"form-control",id:"due_date","onUpdate:modelValue":e[3]||(e[3]=function(t){return l.currentCoupon.due_date=t}),placeholder:"請輸入到期日"},null,512),[[g.nr,l.currentCoupon.due_date]])]),(0,o._)("div",Z,[z,(0,o.wy)((0,o._)("input",{type:"number",class:"form-control",id:"percent","onUpdate:modelValue":e[4]||(e[4]=function(t){return l.currentCoupon.percent=t}),placeholder:"請輸入打折百分比"},null,512),[[g.nr,l.currentCoupon.percent]])]),(0,o._)("div",E,[(0,o._)("div",j,[(0,o.wy)((0,o._)("input",{class:"form-check-input",type:"checkbox",id:"is_enabled","onUpdate:modelValue":e[5]||(e[5]=function(t){return l.currentCoupon.is_enabled=t}),"true-value":1,"false-value":0},null,512),[[g.e8,l.currentCoupon.is_enabled]]),W])])])])]),(0,o._)("div",G,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[6]||(e[6]=function(){return i.hideModel&&i.hideModel.apply(i,arguments)})},"取消"),(0,o._)("button",{type:"button",class:"btn btn-success",onClick:e[7]||(e[7]=function(){return i.updateCoupon&&i.updateCoupon.apply(i,arguments)})},"確定")])])])])}const V={props:{currentItem:Object},data:function(){return{currentCoupon:{}}},methods:{hideModel:function(){this.$emit("emit-hide")},getCoupons:function(){this.$emit("emit-getCoupons")},updateCoupon:function(){var t,e,n=this;this.isNew?(t="".concat("https://vue-course-api.hexschool.io","/api/").concat("wenrong","/admin/coupon"),e="post"):(t="".concat("https://vue-course-api.hexschool.io","/api/").concat("wenrong","/admin/coupon/").concat(this.currentItem.id),e="put"),this.$http[e](t,{data:this.currentCoupon}).then((function(t){t.data.success&&(n.hideModel(),n.getCoupons())}))}},watch:{currentItem:function(){this.currentCoupon=this.currentItem}}};var H=n(3744);const O=(0,H.Z)(V,[["render",N]]),K=O;var Y=n(6799),A=n(1774);const S={data:function(){return{coupons:[],pagination:{},currentCoupon:{},isNew:!1,modalTitle:"",couponModal:"",deleteModal:"",isLoading:!1}},components:{couponModal:K,deleteModal:Y.Z,pagination:A.Z},methods:{getCoupons:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,n="".concat("https://vue-course-api.hexschool.io","/api/").concat("wenrong","/admin/coupons?page=").concat(t);e.isLoading=!0,this.$http.get(n).then((function(t){e.isLoading=!1,e.coupons=t.data.coupons,e.pagination=t.data.pagination}))},showCouponModal:function(t){t?this.couponModal.show():this.couponModal.hide()},showDeleteModal:function(t){t?this.deleteModal.show():this.deleteModal.hide()},createCoupon:function(){this.currentCoupon={},this.showCouponModal(!0),this.modalTitle="新增優惠卷",this.isNew=!0},editCoupon:function(t){this.currentCoupon=Object.assign({},t),this.showCouponModal(!0),this.modalTitle="編輯優惠卷",this.isNew=!1},showDeleteCouponModal:function(t){this.showDeleteModal(!0),this.currentCoupon=t,this.modalTitle="刪除優惠卷"},deleteCoupon:function(t){var e=this,n="".concat("https://vue-course-api.hexschool.io","/api/").concat("wenrong","/admin/coupon/").concat(t);this.$http["delete"](n).then((function(t){t.data.success&&(e.showDeleteModal(!1),e.getCoupons())}))}},created:function(){this.getCoupons()},mounted:function(){this.couponModal=new f.u_(this.$refs.couponModal.$el),this.deleteModal=new f.u_(this.$refs.deleteModal.$el)}},q=(0,H.Z)(S,[["render",_],["__scopeId","data-v-49118372"]]),B=q}}]);
//# sourceMappingURL=468.ed0d73f8.js.map