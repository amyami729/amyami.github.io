(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[939],{4362:(t,r,e)=>{var a=e(1589),n=Math.floor,o=function(t,r){var e=t.length,c=n(e/2);return e<8?i(t,r):s(t,o(a(t,0,c),r),o(a(t,c),r),r)},i=function(t,r){var e,a,n=t.length,o=1;while(o<n){a=o,e=t[o];while(a&&r(t[a-1],e)>0)t[a]=t[--a];a!==o++&&(t[a]=e)}return t},s=function(t,r,e,a){var n=r.length,o=e.length,i=0,s=0;while(i<n||s<o)t[i+s]=i<n&&s<o?a(r[i],e[s])<=0?r[i++]:e[s++]:i<n?r[i++]:e[s++];return t};t.exports=o},8886:(t,r,e)=>{var a=e(8113),n=a.match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},256:(t,r,e)=>{var a=e(8113);t.exports=/MSIE|Trident/.test(a)},8008:(t,r,e)=>{var a=e(8113),n=a.match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},1150:t=>{t.exports=Object.is||function(t,r){return t===r?0!==t||1/t===1/r:t!=t&&r!=r}},2222:(t,r,e)=>{"use strict";var a=e(2109),n=e(7293),o=e(3157),i=e(111),s=e(7908),c=e(6244),u=e(7207),l=e(6135),d=e(5417),p=e(1194),f=e(5112),g=e(7392),h=f("isConcatSpreadable"),v=g>=51||!n((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),y=p("concat"),P=function(t){if(!i(t))return!1;var r=t[h];return void 0!==r?!!r:o(t)},m=!v||!y;a({target:"Array",proto:!0,arity:1,forced:m},{concat:function(t){var r,e,a,n,o,i=s(this),p=d(i,0),f=0;for(r=-1,a=arguments.length;r<a;r++)if(o=-1===r?i:arguments[r],P(o))for(n=c(o),u(f+n),e=0;e<n;e++,f++)e in o&&l(p,f,o[e]);else u(f+1),l(p,f++,o);return p.length=f,p}})},7327:(t,r,e)=>{"use strict";var a=e(2109),n=e(2092).filter,o=e(1194),i=o("filter");a({target:"Array",proto:!0,forced:!i},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},2772:(t,r,e)=>{"use strict";var a=e(2109),n=e(1702),o=e(1318).indexOf,i=e(9341),s=n([].indexOf),c=!!s&&1/s([1],1,-0)<0,u=i("indexOf");a({target:"Array",proto:!0,forced:c||!u},{indexOf:function(t){var r=arguments.length>1?arguments[1]:void 0;return c?s(this,t,r)||0:o(this,t,r)}})},5069:(t,r,e)=>{"use strict";var a=e(2109),n=e(1702),o=e(3157),i=n([].reverse),s=[1,2];a({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),i(this)}})},2707:(t,r,e)=>{"use strict";var a=e(2109),n=e(1702),o=e(9662),i=e(7908),s=e(6244),c=e(5117),u=e(1340),l=e(7293),d=e(4362),p=e(9341),f=e(8886),g=e(256),h=e(7392),v=e(8008),y=[],P=n(y.sort),m=n(y.push),_=l((function(){y.sort(void 0)})),b=l((function(){y.sort(null)})),w=p("sort"),C=!l((function(){if(h)return h<70;if(!(f&&f>3)){if(g)return!0;if(v)return v<603;var t,r,e,a,n="";for(t=65;t<76;t++){switch(r=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(a=0;a<47;a++)y.push({k:r+a,v:e})}for(y.sort((function(t,r){return r.v-t.v})),a=0;a<y.length;a++)r=y[a].k.charAt(0),n.charAt(n.length-1)!==r&&(n+=r);return"DGBEFHACIJK"!==n}})),k=_||!b||!w||!C,O=function(t){return function(r,e){return void 0===e?-1:void 0===r?1:void 0!==t?+t(r,e)||0:u(r)>u(e)?1:-1}};a({target:"Array",proto:!0,forced:k},{sort:function(t){void 0!==t&&o(t);var r=i(this);if(C)return void 0===t?P(r):P(r,t);var e,a,n=[],u=s(r);for(a=0;a<u;a++)a in r&&m(n,r[a]);d(n,O(t)),e=n.length,a=0;while(a<e)r[a]=n[a++];while(a<u)c(r,a++);return r}})},3321:(t,r,e)=>{var a=e(2109),n=e(9781),o=e(6048).f;a({target:"Object",stat:!0,forced:Object.defineProperties!==o,sham:!n},{defineProperties:o})},9070:(t,r,e)=>{var a=e(2109),n=e(9781),o=e(3070).f;a({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!n},{defineProperty:o})},5003:(t,r,e)=>{var a=e(2109),n=e(7293),o=e(5656),i=e(1236).f,s=e(9781),c=n((function(){i(1)})),u=!s||c;a({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(t,r){return i(o(t),r)}})},9337:(t,r,e)=>{var a=e(2109),n=e(9781),o=e(3887),i=e(5656),s=e(1236),c=e(6135);a({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var r,e,a=i(t),n=s.f,u=o(a),l={},d=0;while(u.length>d)e=n(a,r=u[d++]),void 0!==e&&c(l,r,e);return l}})},7941:(t,r,e)=>{var a=e(2109),n=e(7908),o=e(1956),i=e(7293),s=i((function(){o(1)}));a({target:"Object",stat:!0,forced:s},{keys:function(t){return o(n(t))}})},4765:(t,r,e)=>{"use strict";var a=e(6916),n=e(7007),o=e(9670),i=e(4488),s=e(1150),c=e(1340),u=e(8173),l=e(7651);n("search",(function(t,r,e){return[function(r){var e=i(this),n=void 0==r?void 0:u(r,t);return n?a(n,r,e):new RegExp(r)[t](c(e))},function(t){var a=o(this),n=c(t),i=e(r,a,n);if(i.done)return i.value;var u=a.lastIndex;s(u,0)||(a.lastIndex=0);var d=l(a,n);return s(a.lastIndex,u)||(a.lastIndex=u),null===d?-1:d.index}]}))},6089:(t,r,e)=>{"use strict";e.d(r,{Z:()=>k});var a=e(6252),n=e(3577),o=function(t){return(0,a.dD)("data-v-2e245220"),t=t(),(0,a.Cn)(),t},i={class:"card"},s=["src"],c={class:"card-body"},u={class:"card-ti"},l={class:"product-content"},d={class:"product-price"},p={class:"original-price"},f={class:"on-sale-price"},g={class:"card-btn-group"},h={class:"fas fa-heart",ref:"favoriteI"},v=o((function(){return(0,a._)("i",{class:"fas fa-shopping-cart"},null,-1)})),y=[v];function P(t,r,e,o,v,P){var m=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(m,{to:"/product-info/".concat(e.product.id),class:"card-img-link"},{default:(0,a.w5)((function(){return[(0,a._)("img",{src:e.product.imageUrl,class:"card-img"},null,8,s)]})),_:1},8,["to"]),(0,a._)("div",c,[(0,a._)("div",u,[(0,a.Wm)(m,{to:"/product-info/".concat(e.product.id),class:"card-title"},{default:(0,a.w5)((function(){return[(0,a._)("span",null,(0,n.zw)(e.product.title),1)]})),_:1},8,["to"])]),(0,a._)("div",l,[(0,a._)("div",d,[(0,a._)("del",p,(0,n.zw)(t.$filters.currency(e.product.origin_price)),1),(0,a._)("p",f,(0,n.zw)(t.$filters.currency(e.product.price)),1)]),(0,a._)("div",g,[(0,a._)("button",{class:"btn-favorite",ref:"btnFavorite",onClick:r[0]||(r[0]=function(t){return P.updateStatus(e.product)})},[(0,a._)("i",h,null,512)],512),(0,a._)("button",{class:"btn-cart",onClick:r[1]||(r[1]=function(t){return P.addToCart(e.product)})},y)])])])])}var m=e(4648),_=(e(9554),e(1539),e(4747),e(3907));const b={props:["product"],data:function(){return{isSave:!1}},methods:{addToCart:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("shoppingCart/addToCart",{item:t,qty:r})},updateStatus:function(t){var r=this;r.isSave=!r.isSave,this.isSave?(r.$refs.btnFavorite.style.background="white",r.$refs.favoriteI.style.color="red",this.$store.dispatch("favorite/addToFavorite",t)):(r.$refs.btnFavorite.style.background="",r.$refs.favoriteI.style.color="",this.$store.dispatch("favorite/removeFavorite",t))}},computed:(0,m.Z)({},(0,_.rn)("favorite",{favorites:function(t){return t.favorites}})),mounted:function(){var t=this;this.favorites.forEach((function(r){t.product.id===r.id&&(t.isSave=!0,t.$refs.btnFavorite.style.background="white",t.$refs.favoriteI.style.color="red")}))},created:function(){this.$store.dispatch("favorite/getFavoriteContents")}};var w=e(3744);const C=(0,w.Z)(b,[["render",P],["__scopeId","data-v-2e245220"]]),k=C},1774:(t,r,e)=>{"use strict";e.d(r,{Z:()=>y});var a=e(6252),n=e(3577),o=e(9963),i={"aria-label":"Page navigation example"},s={class:"pagination"},c=(0,a._)("span",{"aria-hidden":"true"},"«",-1),u=[c],l=["onClick"],d=(0,a._)("span",{"aria-hidden":"true"},"»",-1),p=[d];function f(t,r,e,c,d,f){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("nav",i,[(0,a._)("ul",s,[(0,a._)("li",{class:(0,n.C_)(["page-item",{disabled:!e.paginations.has_pre}])},[(0,a._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:r[0]||(r[0]=(0,o.iM)((function(t){return f.getProductPages(e.paginations.current_page-1)}),["prevent"]))},u)],2),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.paginations.total_pages,(function(t){return(0,a.wg)(),(0,a.iD)("li",{class:(0,n.C_)(["page-item",{active:e.paginations.current_page===t}]),key:t},[(0,a._)("a",{class:"page-link",href:"#",onClick:(0,o.iM)((function(r){return f.getProductPages(t)}),["prevent"])},(0,n.zw)(t),9,l)],2)})),128)),(0,a._)("li",{class:(0,n.C_)(["page-item",{disabled:!e.paginations.has_next}])},[(0,a._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:r[1]||(r[1]=(0,o.iM)((function(t){return f.getProductPages(e.paginations.current_page+1)}),["prevent"]))},p)],2)])])])}const g={props:{paginations:Object},methods:{getProductPages:function(t){this.$emit("emitGetProducts",t),document.body.scrollTop=document.documentElement.scrollTop=0}}};var h=e(3744);const v=(0,h.Z)(g,[["render",f]]),y=v},2939:(t,r,e)=>{"use strict";e.r(r),e.d(r,{default:()=>W});e(4916),e(4765);var a=e(6252),n=e(3577),o=e(9963),i=function(t){return(0,a.dD)("data-v-78e496a0"),t=t(),(0,a.Cn)(),t},s={class:"products"},c={class:"products-header"},u={class:"products-title"},l={class:"list-icon"},d=i((function(){return(0,a._)("i",{class:"fas fa-list"},null,-1)})),p=(0,a.Uk)("共"),f={class:"allProducts-length"},g=(0,a.Uk)("件商品"),h={class:"products-filter"},v={class:"search-form"},y=i((function(){return(0,a._)("label",{for:"search",class:"searchLabel"},[(0,a._)("i",{class:"fas fa-search"})],-1)})),P=["value"],m=i((function(){return(0,a._)("option",{selected:"true",value:"0"},"最新上架",-1)})),_=i((function(){return(0,a._)("option",{value:"1"},"價格: 高到低",-1)})),b=i((function(){return(0,a._)("option",{value:"2"},"價格: 低到高",-1)})),w=[m,_,b],C=["value"],k={class:"search-bar"},O=i((function(){return(0,a._)("div",{class:"shop-icon"},[(0,a._)("i",{class:"fas fa-store"})],-1)})),S=i((function(){return(0,a._)("div",{class:"septalLine"},null,-1)})),I={class:"product-category"},D=["onClick"],j={class:"card-otherContent"},x={key:0},B={class:"product-pagination"};function $(t,r,e,i,m,_){var b=(0,a.up)("loading"),$=(0,a.up)("card"),A=(0,a.up)("pagination");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a.Wm)(b,{active:m.isLoading},null,8,["active"]),(0,a._)("div",c,[(0,a._)("div",u,[(0,a._)("div",l,[d,(0,a._)("h3",null,(0,n.zw)(m.currentCategory),1)]),(0,a._)("span",null,[p,(0,a._)("i",f,(0,n.zw)(m.displayProducts.length),1),g])]),(0,a._)("div",h,[(0,a._)("div",v,[y,(0,a._)("input",{class:"form-control products-search",maxlength:"18",autocomplete:"off",type:"search",value:m.search,onInput:r[0]||(r[0]=function(t){return m.search=t.target.value}),onKeyup:r[1]||(r[1]=(0,o.D2)((function(){return _.getProductsBySearch&&_.getProductsBySearch.apply(_,arguments)}),["enter"])),placeholder:"搜尋",id:"search"},null,40,P)]),(0,a._)("select",{class:"products-price",onChange:r[2]||(r[2]=function(){return _.updateSort&&_.updateSort.apply(_,arguments)})},w,32),(0,a.wy)((0,a._)("select",{class:"category-select",onChange:r[3]||(r[3]=function(t){return _.updateCategoryId(m.currentCategory)}),"onUpdate:modelValue":r[4]||(r[4]=function(t){return m.currentCategory=t})},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.allCategory,(function(t){return(0,a.wg)(),(0,a.iD)("option",{value:t,key:t.id},(0,n.zw)(t),9,C)})),128))],544),[[o.bM,m.currentCategory]]),m.isShowSearchBar?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"search-popover",onClick:r[5]||(r[5]=function(){return _.getProductsBySearch&&_.getProductsBySearch.apply(_,arguments)})},[(0,a._)("div",k,[O,(0,a.Uk)(' 搜尋 "'+(0,n.zw)(m.search)+'" 商品 ',1)])])):(0,a.kq)("",!0)])]),S,(0,a._)("div",I,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.allCategory,(function(t,r){return(0,a.wg)(),(0,a.iD)("button",{class:(0,n.C_)(["product-category-btn btn",{categoryActive:m.currentCategory===t}]),onClick:function(r){return _.updateCategoryId(t)},key:r},(0,n.zw)(t),11,D)})),128))]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(_.getProductsByPage(m.currentPage,m.displayProducts),(function(t){return(0,a.wg)(),(0,a.iD)("div",{class:"card-wrapper",key:t.id},[(0,a.Wm)($,{product:t},null,8,["product"])])})),128)),(0,a._)("div",j,[0===m.displayProducts.length?((0,a.wg)(),(0,a.iD)("p",x,'查無有關 "'+(0,n.zw)(m.search)+'" 的商品',1)):(0,a.kq)("",!0)]),(0,a._)("div",B,[(0,a.Wm)(A,{class:"pagination-inner",paginations:m.pagination,onEmitGetProducts:_.updatePagination},null,8,["paginations","onEmitGetProducts"])])])}e(9753);var A=e(9227);function Q(t){if(Array.isArray(t))return(0,A.Z)(t)}e(2526),e(1817),e(1539),e(2165),e(8783),e(3948),e(1038);function Z(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var z=e(2780);e(1703),e(6647);function E(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q(t){return Q(t)||Z(t)||(0,z.Z)(t)||E()}e(2222),e(7042),e(7327),e(2772),e(2707),e(5069);var F=e(6089),T=e(1774);const K={components:{card:F.Z,pagination:T.Z},data:function(){return{displayQueryParameters:{categoryId:"全部商品",sortBy:"time",order:"asc"},allProducts:[],displayProducts:[],allCategory:["全部商品","特色推薦","經典設計","木椅","塑膠椅","金屬椅","沙發"],currentCategory:"全部商品",categoryId:"",pagination:{},currentPage:"",isLoading:!1,search:"",isShowSearchBar:!1}},methods:{initAllProducts:function(){var t=this,r="".concat("https://vue-course-api.hexschool.io","/api/").concat("wenrong","/products/all");t.isLoading=!0,this.$http.get(r).then((function(r){t.isLoading=!1,t.allProducts=r.data.products,t.displayProducts=t.allProducts,t.updatePagination(),t.getParameterValueOfCategoryId()}))},getAllProducts:function(){var t=this;t.displayProducts=t.allProducts,t.currentCategory="全部商品",t.updatePagination()},updatePagination:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=this,e=12,a=Math.ceil(r.displayProducts.length/e);r.pagination["total_pages"]=a,r.currentPage=t,r.currentPage===a?r.pagination["has_next"]=!1:r.pagination["has_next"]=!0,1===r.currentPage?r.pagination["has_pre"]=!1:r.pagination["has_pre"]=!0,r.pagination["current_page"]=t},getProductsByPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=12;return r.slice(t*e-e,t*e)},getProductsBySearch:function(){var t=this;t.search&&(this.$router.push({query:{categoryId:"全部商品",keyword:t.search}}),t.currentCategory="全部商品",t.displayProducts=t.allProducts.filter((function(r){return-1!==r.title.indexOf(t.search)})),t.isShowSearchBar=!1),t.updatePagination()},updateCategoryId:function(t){var r=this;r.currentCategory=t,r.displayQueryParameters.categoryId=t,r.updateDisplayProducts()},getParameterValueOfCategoryId:function(){var t=this;t.categoryId=this.$route.query.categoryId,t.updateCategoryId(t.categoryId)},updateSort:function(){var t=this,r=document.querySelector(".products-price");"0"===r.value?(t.displayQueryParameters.sortBy="time",t.displayQueryParameters.order="asc"):"1"===r.value?(t.displayQueryParameters.sortBy="price",t.displayQueryParameters.order="desc"):"2"===r.value&&(t.displayQueryParameters.sortBy="price",t.displayQueryParameters.order="asc"),t.updateDisplayProducts()},updateDisplayProducts:function(){var t,r=this;this.$router.push({query:{categoryId:r.displayQueryParameters.categoryId,order:r.displayQueryParameters.order,sortBy:r.displayQueryParameters.sortBy}}),t="全部商品"===r.displayQueryParameters.categoryId?q(r.allProducts):r.allProducts.filter((function(t){return t.category===r.displayQueryParameters.categoryId}));var e=r.displayQueryParameters.sortBy;"price"===e&&(t=t.sort((function(t,r){return t.price-r.price}))),"desc"===r.displayQueryParameters.order&&(t=t.reverse()),r.displayProducts=t,r.updatePagination()}},watch:{search:function(t){""===t?(this.$router.push({query:{}}),this.$router.push({query:{categoryId:"全部商品"}}),this.getAllProducts(),this.isShowSearchBar=!1):this.isShowSearchBar=!0}},created:function(){this.initAllProducts(),this.getParameterValueOfCategoryId()}};var M=e(3744);const L=(0,M.Z)(K,[["render",$],["__scopeId","data-v-78e496a0"]]),W=L},4648:(t,r,e)=>{"use strict";e.d(r,{Z:()=>o});e(7941),e(2526),e(7327),e(1539),e(5003),e(9554),e(4747),e(9337),e(3321),e(9070);function a(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function n(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,a)}return e}function o(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?n(Object(e),!0).forEach((function(r){a(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):n(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}}}]);
//# sourceMappingURL=939.428a08d6.js.map